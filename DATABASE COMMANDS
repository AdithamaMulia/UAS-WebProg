create database dbgraciaschool1;

CREATE TABLE graciauser (
    userID INT NOT NULL AUTO_INCREMENT,
    nama_depan VARCHAR(500) NOT NULL,
    nama_belakang VARCHAR(500),
    password VARCHAR(500) NOT NULL,
    gender VARCHAR(50),
    tanggal_lahir DATE,
    alamat VARCHAR(500),
    nik VARCHAR(500),
    role ENUM('student', 'teacher', 'admin') NOT NULL,
    PRIMARY KEY(userID),
    INDEX idx_nama_depan (nama_depan),
    INDEX idx_nama_belakang (nama_belakang)
);

CREATE TABLE kelas (
    kelasID INT NOT NULL AUTO_INCREMENT,
    nama_kelas VARCHAR(500) NOT NULL,
    lokasi VARCHAR(500),
    PRIMARY KEY(kelasID),
    INDEX idx_nama_kelas (nama_kelas)
);

CREATE TABLE mapel (
    mapelID INT NOT NULL AUTO_INCREMENT,
    nama_mapel VARCHAR(500) NOT NULL,
    userID INT,
    PRIMARY KEY(mapelID),
    FOREIGN KEY(userID) REFERENCES graciauser(userID),
    INDEX idx_nama_mapel (nama_mapel)
);

CREATE TABLE nilai (
    nilaiID INT NOT NULL AUTO_INCREMENT,
    userID INT NOT NULL,
    mapelID INT NOT NULL,
    nilai DOUBLE,
    semester VARCHAR(10),
    PRIMARY KEY(nilaiID),
    FOREIGN KEY(userID) REFERENCES graciauser(userID),
    FOREIGN KEY(mapelID) REFERENCES mapel(mapelID),
    INDEX idx_semester (semester)
);